var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var n=function(t,n){var o=null===document||void 0===document?void 0:document.getSelection();if(!o)throw new Error("No selection found");o.removeAllRanges(),n.forEach((function(n){var i=n.start,r=n.end,c=function(t,n,o){void 0===n&&(n=0);void 0===o&&(o=0);var i=[],r=function(t){e([],t,!0).forEach((function(t){"#text"===t.nodeName?i.push(t):t.textContent&&r(t.childNodes)}))};r(t.childNodes);var c=null,u=0,s=null,l=0,d=u;if(i.forEach((function(t){if(!c||!s){var e=t.textContent.length,i=[d,d+e];!c&&n>=i[0]&&n<i[1]&&(c=t,u=n-i[0]),!s&&o>i[0]&&o<=i[1]&&(s=t,l=o-i[0]),d+=e}})),!c||!s)return null;return[c,u,s,l]}(t,i,r),u=c[0],s=c[1],l=c[2],d=c[3],p=document.createRange();p.setStart(u,s),p.setEnd(l,d),o.addRange(p)}))};var o=0;function i(){if(document){var t=null===document||void 0===document?void 0:document.getSelection();if(t)return{content:t.toString(),section:t};throw new Error("selection is undefined")}throw new Error("document is undefined")}function r(t,e){o=0;var n=document.getSelection(),i=n.getRangeAt(0);c(t,i.startContainer,i.startOffset);var r=o+n.toString().trim().length;return[o,r]}function c(t,n,i){e([],t.childNodes,!0).some((function(t){if(t.textContent)return t==n?(o+=i,!0):n.parentNode==t?(c(t,n,i),!0):void(o+=t.textContent.length)}))}function u(t,e){for(var n,o=function(t){var e=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")};if("string"==typeof t)return new RegExp("".concat(e(t)),"gi");if(Array.isArray(t)){var n=t.map(e);return new RegExp("(".concat(n.join("|"),")"),"gi")}}(e),i=[];null!==(n=o.exec(t));)i.push({keyword:n[0],start:n.index,end:n.index+n[0].length});return i}function s(t){return u(t.text,t.keywords)}var l=function(e){function n(t){return e.call(this,t)||this}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}(n,e),n}(function(){function t(t,e){void 0===e&&(e={}),this.popoverEle=null,this.distance=5,this.distance=e.distance||this.distance,this.init(t),this.initEvent()}return t.prototype.init=function(t){var e=document.getElementById(t);if(!e)throw new Error("popoverId is not found");this.popoverEle=e,this.popoverEle.style.visibility="hidden",this.popoverEle.style.position="fixed",document.body.appendChild(this.popoverEle)},t.prototype.initEvent=function(){var t=this;document.addEventListener("mouseup",(function(){setTimeout((function(){var e=t.getTriggerPosition();e?t.show(e):t.hide()}),100)}))},t.prototype.show=function(t){var e=t.x,n=void 0===e?0:e,o=t.y,i=void 0===o?0:o,r=t.width,c=void 0===r?0:r;if(this.popoverEle){var u=n+c/2-this.popoverEle.offsetWidth/2,s=i-this.popoverEle.offsetHeight-this.distance;this.popoverEle.style.left="".concat(u,"px"),this.popoverEle.style.top="".concat(s,"px"),this.popoverEle.style.visibility="visible"}},t.prototype.hide=function(){this.popoverEle&&(this.popoverEle.style.visibility="hidden")},t.prototype.getTriggerPosition=function(){var t,e=document.getSelection();if(e){var n=null===(t=document.getSelection())||void 0===t?void 0:t.toString();if(n){var o=e.getRangeAt(0).getBoundingClientRect();return 0===o.width&&0===o.height?null:{text:n,x:o.left+window.scrollX,y:o.top+window.scrollY,width:o.width,height:o.height}}return null}console.error("no selection")},t}());export{l as DrawWordConstituencyPopover,s as auExtractText,r as getSelectionRange,i as getSelectionRangeContent,n as sectionRangeHighlight};
//# sourceMappingURL=bundle.esm.js.map
