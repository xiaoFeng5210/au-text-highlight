var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};function e(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var o=function(t,o){var n=null===document||void 0===document?void 0:document.getSelection();if(!n)throw new Error("No selection found");n.removeAllRanges(),o.forEach((function(o){var r=o.start,i=o.end,c=function(t,o,n){void 0===o&&(o=0);void 0===n&&(n=0);var r=[],i=function(t){e([],t,!0).forEach((function(t){"#text"===t.nodeName?r.push(t):t.textContent&&i(t.childNodes)}))};i(t.childNodes);var c=null,l=0,u=null,s=0,p=l;if(r.forEach((function(t){if(!c||!u){var e=t.textContent.length,r=[p,p+e];!c&&o>=r[0]&&o<r[1]&&(c=t,l=o-r[0]),!u&&n>r[0]&&n<=r[1]&&(u=t,s=n-r[0]),p+=e}})),!c||!u)return null;return[c,l,u,s]}(t,r,i),l=c[0],u=c[1],s=c[2],p=c[3],d=document.createRange();d.setStart(l,u),d.setEnd(s,p),n.addRange(d)}))};var n=0;function r(){if(document){var t=null===document||void 0===document?void 0:document.getSelection();if(t)return{content:t.toString(),section:t};throw new Error("selection is undefined")}throw new Error("document is undefined")}function i(t,e){n=0;var o=document.getSelection(),r=o.getRangeAt(0);c(t,r.startContainer,r.startOffset);var i=n+o.toString().trim().length;return[n,i]}function c(t,o,r){e([],t.childNodes,!0).some((function(t){if(t.textContent)return t==o?(n+=r,!0):o.parentNode==t?(c(t,o,r),!0):void(n+=t.textContent.length)}))}function l(t,e){for(var o,n=function(t){var e=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")};if("string"==typeof t)return new RegExp("".concat(e(t)),"gi");if(Array.isArray(t)){var o=t.map(e);return new RegExp("(".concat(o.join("|"),")"),"gi")}}(e),r=[];null!==(o=n.exec(t));)r.push({keyword:o[0],start:o.index,end:o.index+o[0].length});return r}function u(t){return l(t.text,t.keywords)}var s=function(e){function o(t){return e.call(this,t)||this}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}(o,e),o.prototype.init=function(){},o}(function(){function t(t){this.popoverEle=null,this.init(t),this.initEvent()}return t.prototype.init=function(t){var e=document.getElementById(t);if(!e)throw new Error("popoverId is not found");this.popoverEle=e,this.popoverEle.style.visibility="hidden",this.popoverEle.style.position="fixed",document.body.appendChild(this.popoverEle)},t.prototype.initEvent=function(){var t=this;document.addEventListener("mouseup",(function(){setTimeout((function(){var e=t.getTriggerPosition();console.log("%c [ triggerPosition ]-36","font-size:13px; background:pink; color:#bf2c9f;",e),e?t.show(e):t.hide()}),100)}))},t.prototype.show=function(t){var e=t.x,o=void 0===e?0:e,n=t.y,r=void 0===n?0:n,i=t.width,c=void 0===i?0:i;if(this.popoverEle){var l=o+c/2-this.popoverEle.offsetWidth/2,u=r-5;this.popoverEle.style.left="".concat(l,"px"),this.popoverEle.style.top="".concat(u,"px"),this.popoverEle.style.visibility="visible"}},t.prototype.hide=function(){this.popoverEle&&(this.popoverEle.style.visibility="hidden")},t.prototype.getTriggerPosition=function(){var t,e=document.getSelection();if(e){var o=null===(t=document.getSelection())||void 0===t?void 0:t.toString();if(o){var n=e.getRangeAt(0).getBoundingClientRect();return 0===n.width&&0===n.height?null:{text:o,x:n.left+window.scrollX,y:n.top+window.scrollY,width:n.width,height:n.height}}return console.error("no selection"),null}console.error("no selection")},t}());export{s as DrawWordConstituencyPopover,u as auExtractText,i as getSelectionRange,r as getSelectionRangeContent,o as sectionRangeHighlight};
//# sourceMappingURL=bundle.esm.js.map
