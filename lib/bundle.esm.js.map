{"version":3,"file":"bundle.esm.js","sources":["../src/core/index.ts","../src/index.ts"],"sourcesContent":["/**\n * 构建正则\n * @param keywords\n */\nexport function createRegexFromKeywords(keywords: string | string[]): RegExp | undefined {\n  if (typeof keywords === 'string') {\n    return new RegExp(`\\\\b${keywords}\\\\b`, 'gi')\n  }\n  if (Array.isArray(keywords)) {\n    // 将所有关键字用 | 分隔，并加入 \\b 以确保匹配整个单词，关键字先进行转义\n    return new RegExp(`\\\\b(${keywords.join('|')})\\\\b`, 'gi')\n  }\n}\n\nexport function matchKeywordsWithPositions(str: string, keywords: string | string[]) {\n  const regex = createRegexFromKeywords(keywords)\n  console.log(regex)\n  const matches = []\n  let match: RegExpExecArray | null\n\n  // 使用 exec 遍历所有匹配项\n  // eslint-disable-next-line no-cond-assign\n  while ((match = (regex as RegExp).exec(str)) !== null) {\n    console.log(match, '------match')\n    matches.push({\n      keyword: match[0],\n      start: match.index,\n      end: match.index + match[0].length,\n    })\n  }\n\n  return matches\n}\n","import type { DeafultConfig } from './types'\nimport { matchKeywordsWithPositions } from './core'\n\n/**\n * 核心方法\n * @param config\n */\nfunction textHighlight(config: DeafultConfig) {\n  const { text, keywords } = config\n  const match = matchKeywordsWithPositions(text, keywords)\n  console.log(match)\n}\n\nexport default textHighlight\n"],"names":["matchKeywordsWithPositions","str","keywords","regex","RegExp","concat","Array","isArray","join","createRegexFromKeywords","console","log","match","matches","exec","push","keyword","start","index","end","length","textHighlight","config","text"],"mappings":"AAcgB,SAAAA,EAA2BC,EAAaC,GACtD,IAAMC,EAXF,SAAkCD,GACtC,MAAwB,iBAAbA,EACF,IAAIE,OAAO,MAAAC,OAAMH,EAAa,OAAE,MAErCI,MAAMC,QAAQL,GAET,IAAIE,OAAO,OAAAC,OAAOH,EAASM,KAAK,KAAI,QAAQ,WAFrD,CAIF,CAGgBC,CAAwBP,GACtCQ,QAAQC,IAAIR,GAMZ,IALA,IACIS,EADEC,EAAU,GAKiC,QAAzCD,EAAST,EAAiBW,KAAKb,KACrCS,QAAQC,IAAIC,EAAO,eACnBC,EAAQE,KAAK,CACXC,QAASJ,EAAM,GACfK,MAAOL,EAAMM,MACbC,IAAKP,EAAMM,MAAQN,EAAM,GAAGQ,SAIhC,OAAOP,CACT,CCzBA,SAASQ,EAAcC,GACb,IACFV,EAAQZ,EADasB,EAAMC,KAAND,EAAMpB,UAEjCQ,QAAQC,IAAIC,EACd"}